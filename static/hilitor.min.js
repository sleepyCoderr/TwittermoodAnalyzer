// Original JavaScript code by Chirp Internet: www.chirp.com.au
// Please acknowledge use of this code by including this header.
function Hilitor(e,t){var i=document.getElementById(e)||document.body,n=t||"MARK",r=new RegExp("^(?:"+n+"|SCRIPT|FORM|SPAN)$"),o=["#ff6","#a0ffff","#9f9","#f99","#f6f"],s=[],h=0,a="",l=new RegExp("^[^\\w]+|[^\\w]+$","g"),g=new RegExp("[^\\w'-]+","g");this.setEndRegExp=function(e){return l=e},this.setBreakRegExp=function(e){return g=e},this.setMatchType=function(e){switch(e){case"left":this.openLeft=!1,this.openRight=!0;break;case"right":this.openLeft=!0,this.openRight=!1;break;case"open":this.openLeft=this.openRight=!0;break;default:this.openLeft=this.openRight=!1}},this.setRegex=function(e){if(e=(e=(e=e.replace(l,"")).replace(g,"|")).replace(/^\||\|$/g,"")){var t="("+e+")";return this.openLeft||(t="\\b"+t),this.openRight||(t+="\\b"),a=new RegExp(t,"i")}return!1},this.getRegex=function(){var e=a.toString();return e=(e=e.replace(/(^\/(\\b)?|\(|\)|(\\b)?\/i$)/g,"")).replace(/\|/g," ")},this.hiliteWords=function(e){if(void 0!==e&&e&&a&&!r.test(e.nodeName)){if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)this.hiliteWords(e.childNodes[t]);if(3==e.nodeType&&(nv=e.nodeValue)&&(regs=a.exec(nv))){s[regs[0].toLowerCase()]||(s[regs[0].toLowerCase()]=o[h++%o.length]);var i=document.createElement(n);i.appendChild(document.createTextNode(regs[0])),i.style.backgroundColor=s[regs[0].toLowerCase()],i.style.color="#000";var l=e.splitText(regs.index);l.nodeValue=l.nodeValue.substring(regs[0].length),e.parentNode.insertBefore(i,l)}}},this.remove=function(){for(var e=document.getElementsByTagName(n);e.length&&(el=e[0]);){var t=el.parentNode;t.replaceChild(el.firstChild,el),t.normalize()}},this.apply=function(e){if(this.remove(),void 0!==e&&e)return this.setRegex(e)&&this.hiliteWords(i),a}}